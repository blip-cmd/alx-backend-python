#!/bin/bash

# Scale the Django app deployment to 3 replicas
echo "Scaling the Django app deployment to 3 replicas..."
kubectl scale deployment django-messaging-app --replicas=3

# Verify that multiple pods are running
echo "Verifying that multiple pods are running..."
kubectl get pods

# Perform load testing using wrk
echo "Performing load testing on the app using wrk..."
echo "Please ensure wrk is installed on your system."
wrk -t4 -c100 -d30s http://<your-cluster-ip>:80 # Replace <your-cluster-ip> with the actual ClusterIP of your service

# Monitor resource usage
echo "Monitoring resource usage..."
kubectl top pods
